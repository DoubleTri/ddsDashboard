(this["webpackJsonpmy-ap"]=this["webpackJsonpmy-ap"]||[]).push([[28],{441:function(t,e,a){"use strict";var n=a(36),c=a(4),s=a(19),r=a.n(s),l=a(0),o=a(20),i=a(34),d=a(542),u=a(532),j=a(218),b=a(495),O=a(789),m=a(60),h=a(237),p=a.n(h),x=a(6),f=d.a.Option;e.a=function(t){var e=Object(l.useState)(null),a=Object(c.a)(e,2),s=a[0],h=a[1],y=Object(l.useState)(null),g=Object(c.a)(y,2),v=(g[0],g[1]),S=Object(l.useState)(null),k=Object(c.a)(S,2),N=k[0],w=k[1],C=Object(l.useState)(null),K=Object(c.a)(C,2),T=K[0],D=K[1],I=Object(l.useState)(null),A=Object(c.a)(I,2),E=A[0],B=A[1],G=Object(l.useState)(null),M=Object(c.a)(G,2),F=M[0],L=M[1],J=Object(l.useState)([]),R=Object(c.a)(J,2);return R[0],R[1],Object(l.useEffect)((function(){B(null),L(null),o.b.collection("users").doc(t.dbKey).collection("stats").doc(t.statName).onSnapshot(function(){var t=Object(n.a)(r.a.mark((function t(e){var a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v(e.data().data),h(e.data().stats),a=[],t.next=5,e.data().stats.map((function(t){a.push(Object(x.jsx)(f,{value:t.name,children:p()(t.name,"mm/d")}))}));case 5:w(a),D(a[a.length-1].props.value);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[t]),Object(x.jsx)("div",{children:Object(x.jsxs)(u.a,{justify:"center",style:{padding:"2em"},children:[Object(x.jsx)(j.a,{span:5,children:Object(x.jsx)(d.a,{value:T,style:{width:120},onChange:function(t){D(t)},children:N})}),Object(x.jsx)(j.a,{span:3,children:Object(x.jsx)(b.a,{onChange:function(t){return function(t){B(t)}(t)},placeholder:"Stat",value:E})}),Object(x.jsx)(j.a,{span:13,children:Object(x.jsx)(O.a,{onChange:function(t){L(t.target.value)},placeholder:"Enter any notes",value:F})}),Object(x.jsx)(j.a,{span:1,children:Object(x.jsx)(m.a,{onClick:function(){!function(){var e=s,a={date:new i.a.firestore.Timestamp.now,statEntered:E,text:F,enteredBy:t.user.displayName};e[e.indexOf(e.find((function(t){return t.name===T})))].notes=e[e.indexOf(e.find((function(t){return t.name===T})))].notes.concat(a),e[e.indexOf(e.find((function(t){return t.name===T})))].stat=e[e.indexOf(e.find((function(t){return t.name===T})))].stat+E,o.b.collection("users").doc(t.dbKey).collection("stats").doc(t.statName).update({stats:e}),B(null),L(null)}()},disabled:!E,children:"Submit"})})]})})}},798:function(t,e,a){"use strict";a.r(e);var n=a(36),c=a(4),s=a(19),r=a.n(s),l=a(0),o=a(20),i=a(46),d=a(532),u=a(218),j=a(219),b=a(457),O=a(485),m=a(486),h=a(491),p=a(320),x=a(321),f=a(316),y=a(319),g=a(437),v=a(438),S=a(237),k=a.n(S),N=a(441),w=a(6);var C=function(t){var e=Object(l.useState)(!1),a=Object(c.a)(e,2),n=a[0],s=a[1],r=Object(l.useState)(null),d=Object(c.a)(r,2),u=d[0],S=d[1],C=Object(l.useState)(null),K=Object(c.a)(C,2),T=K[0],D=K[1],I=Object(l.useState)(null),A=Object(c.a)(I,2),E=A[0],B=A[1],G=Object(l.useState)(!1),M=Object(c.a)(G,2),F=M[0],L=M[1],J=Object(l.useState)(null),R=Object(c.a)(J,2),U=R[0],P=R[1],W=Object(l.useState)(null),Y=Object(c.a)(W,2),q=Y[0],z=Y[1],H=Object(l.useState)(null),Q=Object(c.a)(H,2),V=Q[0],X=Q[1],Z=Object(l.useState)(!1),$=Object(c.a)(Z,2),_=$[0],tt=$[1],et=Object(l.useContext)(i.a),at=et.dbKey,nt=et.userInfo,ct=et.currentUser;Object(l.useEffect)((function(){console.log(t),o.b.collection("users").doc(t.dbKey).collection("stats").doc(t.statName).onSnapshot((function(e){e.data()&&(B(e.data().data),S(e.data().stats.slice(e.data().stats.length>=12?e.data().stats.length-12:0,e.data().stats.length)),D(e.data().stats)),e.data()&&e.data().data.postData&&(X(e.data().data.postData.postName),o.b.collection("users").doc(t.dbKey).collection("orgBoard").doc(e.data().data.postData.postId).onSnapshot((function(t){t.data()&&t.data().employee&&z({name:t.data().employee.name,uid:t.data().employee.uid})})))}))}),[t]);var st=function(e){return Object(w.jsx)("svg",{x:e.cx,y:e.cy-40,onClick:function(){return function(e){(n||"statSubmission"===t.from)&&(P(e.payload),L(!0))}(e)},style:{cursor:"pointer"},children:Object(w.jsx)("text",{transform:"rotate(90)",children:e.value})})},rt=function(t){return k()(t,"mm/d")},lt=function(t){return t?{boxShadow:t[t.length-1].stat<=t[t.length-2].stat?"5px 5px 20px #a93c2d":"5px 5px 20px green"}:null};return Object(w.jsxs)("div",{className:t.from,style:"oicGraphs"===t.from?lt(u):null,children:[Object(w.jsxs)("div",{style:{textAlign:"center",padding:"15px"},children:[q&&"oicGraphs"===t.from?q.name+": ":null,V||null,console.log(t.from)]}),Object(w.jsx)(O.a,{width:"100%",aspect:2,children:Object(w.jsxs)(m.a,{data:u,margin:{top:40,right:40,left:10,bottom:10},onClick:function(){return"statSubmission"!==t.from?s(!0):null},isAnimationActive:!1,children:[Object(w.jsx)(h.a,{strokeDasharray:"3 3"}),Object(w.jsx)(p.a,{dataKey:"name",tickFormatter:rt,height:55,angle:90,dy:20,padding:{left:-2,right:-2}}),Object(w.jsx)(x.a,{type:"number",dataKey:"stat"}),Object(w.jsx)(f.a,{}),Object(w.jsx)(y.a,{dot:st,type:"linear",dataKey:"stat",name:t.statName,stroke:"#000000"}),T&&"statSubmission"===t.from?Object(w.jsx)(g.a,{dataKey:"name",tickFormatter:rt,stroke:"#000000",startIndex:T.length>=12?T.length-12:0,endIndex:T.length-1,children:Object(w.jsxs)(m.a,{data:u,children:[Object(w.jsx)(x.a,{hide:!0,reversed:E.upsideDown}),Object(w.jsx)(y.a,{dataKey:"stat",stroke:"#8884d8",label:!1})]})}):null]})}),E&&T?Object(w.jsxs)(j.a,{visible:n,onCancel:function(){return s(!1)},width:"80%",footer:null,children:[Object(w.jsx)(O.a,{width:"100%",aspect:2,children:Object(w.jsxs)(m.a,{data:T,margin:{top:40,right:40,left:10,bottom:10},onClick:function(){return s(!0)},style:lt,children:[Object(w.jsx)(h.a,{strokeDasharray:"3 3"}),Object(w.jsx)(p.a,{dataKey:"name",tickFormatter:rt,height:55,angle:90,dy:20,padding:{left:-2,right:-2}}),Object(w.jsx)(x.a,{type:"number",dataKey:"stat"}),Object(w.jsx)(v.a,{content:function(t){return t.active&&null!=t.payload&&null!=t.payload[0]?Object(w.jsxs)("div",{className:"custom-tooltip",style:{border:"1px, solid, gray",background:"white",padding:"5px"},children:[Object(w.jsx)("p",{children:Object(w.jsxs)("b",{children:["STAT: ",t.payload[0].payload.stat]})}),Object(w.jsx)("p",{children:k()(new Date(t.payload[0].payload.name),"mmmm dS")})]}):""}}),Object(w.jsx)(f.a,{}),Object(w.jsx)(y.a,{dot:st,type:"linear",dataKey:"stat",name:t.statName,stroke:"#7B98A1"}),Object(w.jsx)(g.a,{dataKey:"name",tickFormatter:rt,stroke:"#000000",startIndex:T.length>=12?T.length-12:0,endIndex:T.length-1,children:Object(w.jsxs)(m.a,{data:u,children:[Object(w.jsx)(x.a,{hide:!0,reversed:E.upsideDown}),Object(w.jsx)(y.a,{dataKey:"stat",stroke:"#8884d8",label:!1})]})})]})}),"post"===t.from&&nt.admin?Object(w.jsx)(b.a,{placement:"leftTop",title:"Are you sure you want to delete ".concat(t.statName,"?"),onConfirm:function(){return[t.deleteStat(t.statName),s(!1)]},okText:"Yes",cancelText:"No",children:Object(w.jsx)("div",{style:{color:"red",float:"right",cursor:"pointer"},children:"Delete"})}):null]}):null,U?Object(w.jsx)(j.a,{visible:F,onCancel:function(){return L(!1),void P(null)},footer:null,children:Object(w.jsxs)("div",{children:[Object(w.jsx)("p",{children:t.statName}),Object(w.jsx)("p",{children:Object(w.jsxs)("b",{children:["STAT: ",U.stat]})}),Object(w.jsx)("p",{children:k()(new Date(U.name),"mmmm dS")}),Object(w.jsx)("hr",{}),U.notes.map((function(t,e){return console.log(k()(t.date.toDate(),"mmmm dS - hh:MM TT")),Object(w.jsxs)("div",{children:[Object(w.jsxs)("span",{style:{color:"gray"},children:[t.enteredBy," ",k()(t.date.toDate(),"mmmm dS - hh:MM TT")]}),": ",t.text]},e)}))]})}):null,Object(w.jsx)(j.a,{visible:_,onCancel:function(){tt(!1)},width:"50%",footer:null,children:Object(w.jsx)(N.a,{statName:t.statName,from:"oic",dbKey:at,user:ct})})]})};var K=function(t){var e=Object(l.useState)(null),a=Object(c.a)(e,2),s=a[0],i=a[1],b=Object(l.useState)(null),O=Object(c.a)(b,2),m=O[0],h=O[1],p=Object(l.useState)(!1),x=Object(c.a)(p,2),f=x[0],y=x[1];return Object(l.useEffect)(Object(n.a)(r.a.mark((function e(){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n=[],e.next=4,o.b.collection("users").doc(t.client).collection("stats").get().then((function(t){t.docs.map((function(t){"PRODUCTION"!==t.data().data.name&&"COLLECTIONS"!==t.data().data.name&&"GROSS INCOME"!==t.data().data.name||n.push(t.data().data.name),a.push(t.data().data.name)})),i(a),h(n)}));case 4:case"end":return e.stop()}}),e)}))),[t.client]),Object(w.jsxs)("div",{children:[Object(w.jsxs)(d.a,{className:"test",justify:"space-around",children:[Object(w.jsx)(u.a,{span:21,children:Object(w.jsx)("div",{style:{cursor:"pointer"},onClick:function(){return y(!0)},children:"See All Stats"})}),m?m.map((function(e,a){return Object(w.jsx)(u.a,{span:7,style:{marginBottom:"2em"},children:Object(w.jsx)(C,{dbKey:t.client,statName:e,from:"oicGraphs"},a)},a)})):null]}),s?Object(w.jsx)(j.a,{visible:f,onCancel:function(){return y(!1)},width:2e3,footer:null,children:Object(w.jsx)(d.a,{className:"test",justify:"space-around",children:s.map((function(e,a){return Object(w.jsx)(u.a,{span:7,style:{marginBottom:"2em"},children:Object(w.jsx)(C,{dbKey:t.client,statName:e,from:"oicGraphs"},a+125)},a+125)}))})}):null]})};e.default=function(){var t=Object(l.useContext)(i.a).logout,e=Object(l.useState)([]),a=Object(c.a)(e,2),s=a[0],d=a[1];return Object(l.useEffect)(Object(n.a)(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.next=3,o.b.collection("users").get().then((function(t){t.docs.map((function(t){t.data().businessName&&e.push(t.data().businessName)})),d(e)}));case 3:case"end":return t.stop()}}),t)}))),[]),Object(w.jsxs)("div",{className:"managementDashboardWrapper",style:{marginTop:"3em"},children:[Object(w.jsx)("div",{onClick:function(){return t()},style:{cursor:"pointer",color:"#dddddd",marginLeft:"2em"},children:"logout"}),s.length?s.map((function(t,e){return Object(w.jsxs)("div",{style:{marginBottom:"5em"},children:[Object(w.jsx)("h1",{style:{color:"#dddddd",margin:"1em"},children:t}),Object(w.jsx)(K,{client:t})]},e)})):null]})}}}]);
//# sourceMappingURL=28.68400c67.chunk.js.map