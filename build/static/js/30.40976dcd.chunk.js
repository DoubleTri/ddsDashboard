(this["webpackJsonpmy-ap"]=this["webpackJsonpmy-ap"]||[]).push([[30],{794:function(t,e,n){"use strict";n.r(e);var a,r,c=n(36),s=n(4),i=n(19),o=n.n(i),u=n(0),d=n(20),l=n(552),p=n.n(l),b=n(46),f=n(9),m=n(2),j=n(12),g=n(16),h=n(22),x=n(23),O=n(553),v=n(554),C=n(6),S=v.a.div(a||(a=Object(O.a)(["\n  background-color: #dfdfdf;\n  box-shadow: 4px 4px 12px 4px #888888;\n  max-height: 60em;\n  overflow: auto;\n  margin: 8px;\n  border-radius: 2px;\n  width: 500px;\n  display: flex;\n  justify-content: center;\n"]))),w=v.a.div(r||(r=Object(O.a)(["\n  padding: 8px;\n  transition: background-color 2s ease;\n  flex-grow: 1;\n"])));function y(t){return Object(C.jsx)(S,{children:Object(C.jsx)(w,{children:t.children})})}var D,I=n(106),k=n(10),G=n.n(k),T={endDrag:function(t,e,n){e.didDrop()?(console.log("drag ended, correct target "),console.log(t,e,n)):console.log("wrong target")},beginDrag:function(t){return{id:t.id}},isDragging:function(t,e){return t.id===e.getItem().id}},K=v.a.div(D||(D=Object(O.a)(["\n        border-radius: 2px;\n    "])));var N,R=p.a.flowRight([Object(I.DropTarget)("Card",{hover:function(t,e){var n=t.columnId,a=t.columnIndex,r=e.getItem();r.id!==t.id&&t.moveCard(r.id,n,a)}},(function(t){return{connectDropTarget:t.dropTarget()}})),Object(I.DragSource)("Card",T,(function(t,e){return{connectDragSource:t.dragSource(),isDragging:e.isDragging()}}))])((function(t){return p.a.flowRight(t.connectDragSource,t.connectDropTarget)(Object(C.jsx)("div",{className:G()("Card",{"Card--dragging":t.isDragging,"Card--spacer":t.isSpacer}),children:Object(C.jsx)(K,{children:t.title})}))})),V=v.a.div(N||(N=Object(O.a)(["\n    display: flex;\n"])));function A(t){return Object(C.jsx)(V,{className:"Board",children:t.columns.map((function(e){return Object(C.jsxs)(y,{title:e.title,children:[e.cardIds.map((function(e){return t.cards.find((function(t){return t.id===e}))})).map((function(n,a){return Object(C.jsx)(R,{id:n.id,columnId:e.id,columnIndex:a,title:n.title,moveCard:t.moveCard},n.id)})),0===e.cardIds.length&&Object(C.jsx)(R,{isSpacer:!0,isDragging:t.isDragging,moveCard:function(n){return t.moveCard(n,e.id,0)}})]},e.id)}))})}var J=n(542),B=n(532),E=n(218),M=n(789),W=n(60),q=J.a.Option,z=function(t){Object(h.a)(n,t);var e=Object(x.a)(n);function n(t){var a;return Object(j.a)(this,n),(a=e.call(this,t)).selectedStatGroup=function(t){var e=a.props.stats.map((function(t){return t.id})).filter((function(e){return!t.statArr.includes(e)}));a.setState({name:t.name}),a.setState({columns:[{id:0,title:"one",cardIds:e},{id:1,title:"two",cardIds:t.statArr}]})},a.submit=function(){d.b.collection("users").doc(a.props.dbKey).collection("statGroup").doc(a.state.name).set({name:a.state.name,statArr:a.state.columns[1].cardIds})},a.moveCard=function(t,e,n){a.setState((function(a){return{columns:a.columns.map((function(a){return Object(m.a)(Object(m.a)({},a),{},{cardIds:p.a.flowRight((function(r){return a.id===e?[].concat(Object(f.a)(r.slice(0,n)),[t],Object(f.a)(r.slice(n))):r}),(function(e){return e.filter((function(e){return e!==t}))}))(a.cardIds)})}))}}))},a.handleChange=function(){console.log("changed")},a.state={cards:a.props.stats,columns:a.props.columns,name:null,statGroups:null,nameVisable:!1},a}return Object(g.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=[];d.b.collection("users").doc(this.props.dbKey).collection("statGroup").onSnapshot(function(){var n=Object(c.a)(o.a.mark((function n(a){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=[],n.next=3,a.docs.map((function(t,n){e.push(Object(C.jsx)(q,{data:t.data(),children:t.data().name},n))}));case 3:t.setState({statGroups:e});case 4:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}},{key:"render",value:function(){var t=this;return Object(C.jsxs)(B.a,{justify:"center",children:[Object(C.jsxs)(E.a,{span:4,children:[Object(C.jsx)(J.a,{style:{width:"100%",marginRight:"6px"},placeholder:"Select Stat Group",onChange:function(e,n){return t.selectedStatGroup(n.data)},children:this.state.statGroups}),Object(C.jsx)("div",{style:{marginTop:"1em"},onClick:function(){return t.setState({nameVisable:!0,name:null})},children:"Create New Stat Group"})]}),Object(C.jsxs)(E.a,{span:10,children:[this.state.nameVisable?Object(C.jsx)(M.a,{style:{width:"80%"},onChange:function(e){return t.setState({name:e.target.value})}}):null,this.state.name&&!this.state.nameVisable?this.state.name:null,Object(C.jsx)("br",{}),Object(C.jsx)(A,{cards:this.state.cards,columns:this.state.columns,moveCard:this.moveCard}),Object(C.jsx)(W.a,{onClick:this.submit,children:"Submit"})]})]})}}]),n}(u.Component),F=z;e.default=function(){var t=Object(u.useState)(null),e=Object(s.a)(t,2),n=e[0],a=e[1],r=Object(u.useState)(null),i=Object(s.a)(r,2),l=i[0],p=i[1],f=Object(u.useContext)(b.a).dbKey;return Object(u.useEffect)(Object(c.a)(o.a.mark((function t(){var e;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f){t.next=4;break}return e=[],t.next=4,d.b.collection("users").doc(f).collection("stats").get().then((function(t){t.docs.map((function(t,n){return e.push({id:t.data().data.id,title:t.data().data.name})}))})).then((function(){a(e),p([{id:0,title:"one",cardIds:e.map((function(t){return t.id}))},{id:1,title:"two",cardIds:[]}])}));case 4:case"end":return t.stop()}}),t)}))),[f]),Object(C.jsx)("div",{className:"statGroupWrapper",children:n&&l?Object(C.jsx)(F,{stats:n,columns:l,dbKey:f}):"loading...."})}}}]);
//# sourceMappingURL=30.40976dcd.chunk.js.map